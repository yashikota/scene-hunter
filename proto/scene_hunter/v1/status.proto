syntax = "proto3";

package scene_hunter.v1;

import "buf/validate/validate.proto";

option go_package = "github.com/yashikota/scene-hunter/server/gen/scene_hunter/v1;scene_hunterv1";

message StatusRequest {}

message ServiceStatus {
  string name = 1 [(buf.validate.field).string.min_len = 1];
  bool healthy = 2;
  string message = 3;
}

message StatusResponse {
  bool overall_healthy = 1;
  repeated ServiceStatus services = 2;
  string timestamp = 3 [(buf.validate.field).string = {pattern: "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}[+-]\\d{2}:\\d{2}$"}];
}

service StatusService {
  rpc Status(StatusRequest) returns (StatusResponse);
}
